{"ast":null,"code":"import _Object$entries from \"@babel/runtime-corejs2/core-js/object/entries\";\nvar _jsxFileName = \"/Users/yashgadle/Yash/rrrr/pages/index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from \"react\";\nimport \"./App.css\";\nimport { Auth } from \"aws-amplify\";\nimport MyComponent from \"../components/MyComponent\";\nimport withData from \"../hoc/withData\";\nimport cookies from \"next-cookies\";\nexport const AuthContext = React.createContext({\n  token: \"\",\n  userDetails: {}\n});\n\nconst App = props => {\n  const {\n    token,\n    userDetails\n  } = props;\n  useEffect(() => {\n    Auth.currentAuthenticatedUser().then(user => console.log({\n      user\n    })).catch(err => console.log(err));\n  });\n\n  const checkUser = function () {\n    Auth.currentAuthenticatedUser().then(user => console.log({\n      user\n    })).catch(err => console.log(err));\n  };\n\n  const signOut = function () {\n    Auth.signOut().then(data => console.log(data)).catch(err => console.log(err));\n  };\n\n  return __jsx(AuthContext.Provider, {\n    value: {\n      token,\n      userDetails\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, __jsx(\"header\", {\n    className: \"App-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Edit \", __jsx(\"code\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"src/App.js\"), \" and save to reload.\"), __jsx(MyComponent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    onClick: () => {\n      //@ts-ignore\n      Auth.federatedSignIn({\n        provider: \"Google\"\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \"Sign In\"), __jsx(\"button\", {\n    onClick: checkUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Check User\"), __jsx(\"button\", {\n    onClick: signOut,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Sign Out\"))));\n};\n\nApp.getInitialProps = async function (ctx) {\n  //TODO: Token check for private routes\n  //Cookie access token or not\n  // if(ctx does not include accessToken then private route){}\n  const _cookies = cookies(ctx);\n\n  let accessToken = \"\";\n  let userDetails = {};\n\n  _Object$entries(_cookies).forEach(([key, value]) => {\n    if (key.includes(\"accessToken\")) accessToken = value;\n    if (key.includes(\"user\")) userDetails = value;\n  });\n\n  console.log(userDetails);\n  return {\n    token: accessToken,\n    userDetails: userDetails\n  };\n};\n\nexport default withData(App);","map":{"version":3,"sources":["/Users/yashgadle/Yash/rrrr/pages/index.tsx"],"names":["React","useEffect","Auth","MyComponent","withData","cookies","AuthContext","createContext","token","userDetails","App","props","currentAuthenticatedUser","then","user","console","log","catch","err","checkUser","signOut","data","federatedSignIn","provider","getInitialProps","ctx","_cookies","accessToken","forEach","key","value","includes"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport \"./App.css\";\nimport { Auth } from \"aws-amplify\";\nimport MyComponent from \"../components/MyComponent\";\nimport withData from \"../hoc/withData\";\nimport cookies from \"next-cookies\";\nimport { NextPage } from \"next\";\n\nexport const AuthContext = React.createContext({\n  token: \"\",\n  userDetails: {} as any\n});\n\ninterface Props {\n  token: string;\n  userDetails: any;\n}\n\nconst App: NextPage<Props> = props => {\n  const { token, userDetails } = props;\n\n  useEffect(() => {\n    Auth.currentAuthenticatedUser()\n      .then(user => console.log({ user }))\n      .catch(err => console.log(err));\n  });\n\n  const checkUser = function() {\n    Auth.currentAuthenticatedUser()\n      .then(user => console.log({ user }))\n      .catch(err => console.log(err));\n  };\n\n  const signOut = function() {\n    Auth.signOut()\n      .then(data => console.log(data))\n      .catch(err => console.log(err));\n  };\n  return (\n    <AuthContext.Provider\n      value={{\n        token,\n        userDetails\n      }}\n    >\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <p>\n            Edit <code>src/App.js</code> and save to reload.\n          </p>\n          <MyComponent />\n          <button\n            onClick={() => {\n              //@ts-ignore\n              Auth.federatedSignIn({ provider: \"Google\" });\n            }}\n          >\n            Sign In\n          </button>\n          <button onClick={checkUser}>Check User</button>\n          <button onClick={signOut}>Sign Out</button>\n        </header>\n      </div>\n    </AuthContext.Provider>\n  );\n};\n\nApp.getInitialProps = async function(ctx) {\n  //TODO: Token check for private routes\n  //Cookie access token or not\n  // if(ctx does not include accessToken then private route){}\n\n  const _cookies = cookies(ctx);\n  let accessToken = \"\";\n  let userDetails = {} as any;\n\n  Object.entries(_cookies).forEach(([key, value]) => {\n    if (key.includes(\"accessToken\")) accessToken = value;\n    if (key.includes(\"user\")) userDetails = value;\n  });\n\n  console.log(userDetails);\n\n  return {\n    token: accessToken,\n    userDetails: userDetails\n  };\n};\n\nexport default withData(App);\n"]},"metadata":{},"sourceType":"module"}